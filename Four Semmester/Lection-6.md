---
marp: true
---

# Лекция 6: Сервисы

---
## DHCP
**DHCP** - Dynamic Host Configuration Protocol, DHCP является потомком проткола BOOTP и использует его вложение. BOOTP является развитием RARP - Reverse ARP. Основная задача DHCP предоставление конфигураций хостам  в сети.

**Основной параметр DHCP**
> **lease** - аренда, задаваемая сервером, может быть выдан как infinty приблизительно равный 136 годам.
> **reserve** - возможность привязки MAC к IP.
---
## Таймеры DHCP
> **lease** - аренда, время после которого устройство не имеет права использовать адресс
> **renewal** - время после котрого устройство попытается обновить аренду, половина значения lease
> **rebind** - время после которого устройство попытаться обновить аренду ещё раз, если после renewal не было 

**DHCP-NACK** - пакет отправляемый DHCP сервером для принудительной остановки аренды

---
## Настройка DHCP

>`(config)#ip dhcp pool UTMN` - создание пула
>`(config-dhcp)#network 192.168.0.0` - настройка раздаваемого адреса
>`(config)#default-router 192.168.0.1`- настройка раздаваемого шлюза
>`(config)#lease 2 30 34` - настройка времени аренды
>`(config)#host` - привязка к хостам

>`(config)#ip address 192.168.0.2 secondary` - настройка вторичного IPv4 адреса


---
<!-- _footer: \\* Ретранслятор (Relay) используется для передачи broadcast трафика из одного домена в другой -->
## Заголовок DHCP
**Mesage type (op)** - boot request / boot reply, тип сообщения BOOTP
**Hardware type (htype)** - тип устройства, как правило равно 1 - Ethernet
**Hardware length (hlen)** - длинна аппаратного адреса MAC - 6 байт
**Hops** - количество хопов между сервером и клиентом, в случае использования ретранслятора
**Xid** - идентификатор транзакции, генерируемый клиентом
**Seconds (secs)** - время с начала получения адреса
**Flags** - специальные параметры
**Client IP (ciaddr)** - адресс клиента, по умолчанию равно 0.0.0.0
**New client IP address (yiaddr)** - новый адресс клиента
**Server IP (siaddr)** - адресс сервера

---
**Relay IP (giaddr)** - адресс ретранслятора
**Client MAC (chaddr)** - аппаратный адрес клиента, не всегда является MAC
**Server name (sname)** - имя сервера, не обязано присутствовать
**File** - файл, для удалённой загрузки, не обязан присутствовать
**Magick cookie (options)** - опции DHCP (номер / значение)

---