=================================================
                    ССПИ-Зачёт
=================================================
1. Структура кадра Ethernet: Preamble, Start frame delimiter, MAC destination, MAC source, 802.1Q 
tag (optional):
    Преамбола - ныне не используется, механизм предотвращающий коллизию - 7 байт.
    SFD - однобайтовое значение сигнализирующее о начале кадра Ethernet
    MAC destination - MAC получателя - 6 байт
    MAC source - MAC отправителя - 6 байт
    802.1 tag - тэг принадежности к VLAN, занимает из Payload-a 4 байта в которые входят:
        TPID - 2 байта, Tag protocol ID - идентификатор протокола тегирования для 802.11Q это 0х8100
        TCI - Tag control info - 2 байта в которые входят:
            PCP - Priority Code point - код приоритета, используется для обозначения приоритета кадра в 802.11p, 3 бита
            DEI - Drop elgible indicator, 1 бит, указывает может ли кадр быть отброшен
            VID - 12 бит, идентификатор VLAN
2. Структура кадра Ethernet: Ethertype (Ethernet II) or length (IEEE 802.3), Payload, Frame check 
sequence, Interpacket gap (IPG):
    Для Ethernet II - Ethertype вложение - указывает на тип протокола кадра, 2 байта. Значение должно быть больше или равно 1536.
    Для 802.3 - Длинна кадра в байтах. Значение должно быть меньше 1500. Значение между 1500 и 1536 не определны.
    Payload - полезная нагрузка, поле данных кадра. Длинна варьируется от 42, в случае использование тегирования до 1500 байт. Минимальный размер пейлода обусловлен
    необходимостью соответствовать минимальному размеру кадра. Минимальный размер кадра в свою очередь обусловлен предотвращением коллизий.
    FCS - контрольная сумма - 4 байта.
    IPG - 12 байт, используемых для создания простоя между кадрами.
3. Ethernet-frame. MTU. Карликовые и гигантские кадры
    MTU - максимальный размер пейлода равный 1500 байт. Гигантские кадры называемые Jumbo-фреймами - это кадры несущие пейлоад превышающий это значение. Такой фрейм
    может содержать до 9 000(16 000) байт. В провайдерских сетях Jumbo-фреймы отключены.
4. Понятия коммутации и широковещательного домена. Принятие коммутационного решения.
    Коммутация - процесс направления пакетов абонентов сегмента сети. Коммутационное решение принимается на основе коммутционной(-ых) таблиц, которые строятся в результате
    процедуры известной как MAC-learning или же изучения MAC адресов в пределах домена. Получая фрейм на некотороый порт, комутатор обращается к комутационной таблице
    и смотрит есть ли запись о MAC адресе, полученном в поле MAC-destination фрейма. Если запись имеется то пакет отправляется через соотвествующий порт. В противном
    случае, пакет отправляется со всех портов кроме порта, с которого фрейм был получен. Добавление записей в таблицу происходит при получении кадра.
5. Виртуальные локальные сети. VLAN ID. Виды портов. Конфигурация. Диагностика.
    Виртуальные локальные сети, VLAN - технология сегрегации широковещательного домена на несколько щироковещательных доменов. Применяется для создания сегментов сети
    независимо от их физического расположения. Технически реализуется за счёт тегирования входящего трафика, тегирование осуществляется согласно стандарту IEEE 802.1Q.
    В процессе тегирования в полученный фрейм от хоста добавляется поле-тег содержащее TPID - протокол тегирования и VID - идентификатор VLAN. Под VID выделено
    12 бит, что соответсвует 4096 возможным значениям VLAN, исключив VLAN 0, остаётся 4095 возможных идентификаторов VLAN.
    Концепция VLAN подразумевает access-порты и trunk-порты, то есть порты доступа и магистральные порты соответственно. Access-port - это порт в который воткнуто
    конечное устройство (хост), такой порт может принадлежать какому либо из VLAN. Trunk-port, напротив, представляет собой магистраль для соединения двух
    сетевых устройств и пропускает все установленные конфигурацией порта VLAN. В CISCO настройка VLAN происходит следующим образом:
    (config)#vlan 26
    (config-vlan)#exit
    ->VLAN создаётся после выхода из режима конфигурации VLAN.
    (config)#int g0/0
    (config-if)#switchport mode access - переводим порт в режим Access.
    (config-if)#switchport access vlan 26 - добавяем порт во vlan 26.
    (config-if)#exit
    (config)#int g0/1
    (config-if)#switchport trunk encapsulation dot1q - включает инкапсуляцию (тегирование) в соответствие с IEEE802.1Q.
    (config-if)#switchport mode trunk - переводит порт в режим Trunk.
    (config-if)#switchport trunk allowed vlan 26 - ограничивает VLAN, передаваемые через этот порт.
    Диагностику можно выполнить через:
    #show interfaces trunk - выводит статистику магистральных интерфейсов.
    #show vlan (brief) - выводит информацию о vlan.
6. Тэггирование кадров. Виды тэггирования. Dot1q-метка. Конфигурация. Диагностика.
    //
7. Фреймы Ethernet II и IEEE 802.3.
    //
8. Виды VLAN: по-умолчанию, нативный, управления, голосовой
    Нативный VLAN (VLAN по умолчанию) - вид VLAN проходя через который трафик не будет тегироваться. По умолчанию это VLAN 1.
    VLAN управления - это VLAN которая используется только для управления сетевыми устройствами.
    Voice VLAN - специальный вид VLAN для передачи голосовых данных. При использовании Voice VLAN появляется возможность конфигурации параметров качества сервиса
    QoS. Пакеты из Voice VLAN идут с повышенным приоритетом.
9. Протокол DTP. Состояния. Безопасность. Конфигурация. Диагностика.   
    DTP - Dynamic Trunking Protocol - проприетарный протокол CISCO предназначеный для автоматической конфигурации транковых соединений. DTP имеет следующие состояния:
    AUTO - автоматический переход в магистральный режим если на другом конце будет установлен DESIRABLE
    DESIRABLE - автоматический переход в магистральный режим если на другом конце будет установлен DESIRABLE или AUTO
    Настройка производится следующим образом:
    SW_1(config)#int g0/0
    SW_1(config-if)#switchport trunk encapsulation dot1q
    SW_1(config-if)#switchport mode dynamic desirable
    SW_1(config-if)#exit
    SW_2(config)#int g0/0
    SW_1(config-if)#switchport trunk encapsulation dot1q
    SW_1(config-if)#switchport mode dynamic auto
    Устройства CISCO имеют уязвимость в виде режима AUTO по умолчанию на портах коммутатора. Злоумышленик может проэксплуатировать данную уязвимость подключив
    свой комутатор и настроив его интерфейс как DESIRABLE, тем самым получив доступ к сети. Для защиты необходимо отключать DTP на портах где создание
    магистрали не планируется. Для этого:
    (config)#int g0/1
    (config-if)#switchport nonegotiate
10. MLS. Назначение и принцип работы. Маршрутизируемые порты и внутренние VLAN. Конфигурация. Диагностика.
    MLS - Multi-layer switch, межуровневый комутатор - это устройство которое реализует функции комутатора, например, принятие комутационных рещений, но также способно
    реализовывать функции маршрутизатора, например, принятие маршрутизационных решений. MLS позволяет создавать routed-ports, маршрутизируемые порты. Такие порты
    будут являтся портами L3 и содержаться в специальных VLAN называемых internal, внутренние. Настройка:
    (config)#int g0/0
    (config-if)#no switchport
    (config-if)#exit
    Порты заносятся в соответсвующие VLAN начиная с 1006, однако это можно изменить:
    (config)#vlan internal policy allocation descending
    Внутренние VLAN не отображаются в обычной таблице выводимой используя #show vlan. Чтобы получить информацию о внутренних VLAN:
    (config)#show vlan internal usage
11. Маршрутизация между VLAN средствами MLS. Конфигурация. Диагностика.
    Для осуществления так называемой IVR - Inter-VLAN Routing можно воспользоваться SVI - Switch Virtual Interface, логический интерфейс L3 привязанный к VLAN.
    Для осуществления межвлановой маршрутизации средствами MLS необходимо использовать SVI и указать IP-адреса соотвествующих интерфейсов как шлюз по умолчанию для
    хостов находящихся в этом домене. Обязательным условием осуществления IVR является включение функций маршрутизатора на MLS. Настройка:
    (config)#ip routing
    (config)#int vlan 122  
    (config-if)#ip address 192.168.0.1 255.255.255.0
    (config-if)#no shutdown
    (config)#int vlan 222
    (config-if)#ip address 192.168.1.1 255.255.255.0
    (config-if)#no shutdown
12.  Маршрутизация между VLAN средствами маршрутизатора. Конфигурация. Диагностика.
    Для осуществления IVR средствами маршрутизатора можно воспользоваться sub-interfaces, подинтерфейсами - логическими интерфейсами связанными с определённым портом на
    маршрутизаторе. Данная концепция называется Router-on-Stick, RoS, Роутер-на-палочке. Хосты в этом домене должны иметь соответсвующие адреса как шлюз по-умолчанию.
    Настройка:
    SW(config)#int g0/0
    SW(config-if)#switchport trunk encapsulation dot1q
    SW(config-if)#switchport mode trunk
    SW(config-if)#switchport trunk allowed vlan 122,222
    SW(config-if)#switchport trunk native vlan 222
    Router(config)#int g0/0.122
    Router(config-subif)#encapsulation dot1q 122
    Router(config-subif)#ip address 192.168.0.1 255.255.255.0
    Router(config-subif)#no shutdown
    Router(config-subif)#exit
    Router(config)#int g0/0.222
    Router(config-subif)#encapsulation dot1q 222 native
    Router(config-subif)#ip address 192.168.1.1 255.255.255.0
    Router(config-subif)#no shutdown
13. Восстановление пароля в маршрутизаторе. Конфигурация. Диагностика.
    Восстановление пароля на маршрутизаторе CISCO выполняется следующим образом:
    1. Выключить устройство
    2. При включении нажать ctrl+br, где br - fn + pgup. Это действие прервёт загрузку системы.
    3. В этом режиме, назывемым rommon:
        >en
        #dir nvram:
        #erase startup-config
        #config-register 0x2102
        #reload
    Config-register - регистр конфигурации, по умолчанию 0x2102 - информирует систему о том что при загрузке необходимо загрузить startup-config.
14. Восстановление пароля в коммутаторе. Конфигурация. Диагностика.
    Для востановления пароля на коммутаторе необходимо:
    1. Зажать кнопку mode, отключить и включить питание.
    2. В режиме востановления:
        flash init
        dir flash:
        delete config.txt
        boot
15. Структура заголовка IPv4: Version, IHL, DSCP, ECN, Total Length
    Заголовок IPv4 из:
    1. Version - 4 бит, для IPv4 это 0100
    2. IHL - Internet Header Length - длинна заголовка в 4 байтных (32 битных) словах, 4 бит.
    3. DSCP - DiffServ code point - поле типа сервиса, 6 бит
    4. ECN - 2 бита, Explicit congestion notification - предупреждение о перегрузки сети. 
    5. Total Length - длинна, объём пакета в байтаъ в сумме с заголовком, минимальная длинна состовляет 20 байт, максимальная 65 535 байт.
    Все участники сети обязаны поддерживать размер пакета в 576 байт, пакет, чей размер превышает поддерживаемый размер, фрагментируется, 16 бит.
16. Структура заголовка IPv4: Identification, Flags, Fragment Offset, Time To Live
    6. Identification - идентификатор полученного пакета применяемый для сбора основного пакета в случае если он был фрагментирован, 16 бит.
    7. Flags - флаги, 3 бит имеет три возможных значения 0 - резервирован. 2 - не фрагментировать. 6 - фрагментация не завершена, то есть
    у пакета еще есть фрагменты.
    8. Fragment Offset - смещение сегментов фрагментации относительно начального блока, который имеет смещение равное нулю. Исчисляется как
    2^n-1. Длинна поля 13 бит что соответсвует 8192 возможных значения. Смещение происходит в единицах равных 8 битам, одному байту, что 
    даёт 8191 * 8 = 65 528 бит смещения.
    9. TTL, Time to live - время жизни пакета, предотвращает петли маршрутизации. Задано в секундах, но изменяется в случае если прохождение
    фрейма через маршрутизатор заняло меньше одной секунды. 8 бит.
17. Структура заголовка IPv4: Protocol, Header Checksum, Source IP Address, Destination IP Address, Options.
    10. Protocol - 8 бит, идентификатор протокола стандартизированый IANA в RFC 790
    11. Header Checksum - 16 бит. Контрольная сумма вычисляемая при прохождении роутера ввиду изменения TTL.
    12. Source IP - 32 бит, адресс отправителя.
    13. Destination IP - 32 бит, адресс получателя.
    14. Options - поле изменяемого размера содержащие опции. Опции стандартизированы IANA. 


        