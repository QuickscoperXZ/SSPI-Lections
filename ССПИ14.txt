================================================
                    ССПИ14
================================================
Протокол STP
STP - Spanning Tree Protocol
broadcast storm - явления заключающееся в бесконечном создании broadcast-запросов в кольце комутаторов. Broadcast-storm способен вывести из строя целую сеть.
Заполняет канал и не позволяет подключится через SSH/telnet. Является распространённой атакой на сети.
Таким образом STP решает проблему петлей комутации.

Нестабильность базы MAC-адресов - постоянная перезапись базы MAC-адресов, возникающая с двухсторонним принятием ARP-reply с MAC-адреса и его дальнейшей перезаписи в 
таблице ARP. Это может являтся (и является) причиной повторной отправки кадров.

Протокол STP блокирует определенные порты и разрывает петлю.
В основе протокола лежит "Алгоритм основного(покрывающего) дерева". Протокол был разработан Радьей Перлман. Протокол стандартизирован как IEEE802.1w в 1990.
В 2004 802.1w был модернизирован и вошёл в состав IEEE802.11D. Протокол STP является семейством протоколов и является частью стандарта IEEE802.1q.

Идея STP заключающется в том чтобы определить корневой комутатор и заблокировать остальные.
Root Bridge - роль комутатора являющаяся корнем.
Designated Bridge - роль комутатора которая выбираетеся на каждом сегменте. Роль отвечает за наиближайшее расположение к Root Bridge. Таким образом, на Root все порты
будут являтся Designated.
Чтобы добраться до Root, каждому комутатору необходимо выставить Port Priority Vector(PPV), то есть кратчайшую дорогу.

Кадром STP является BPDU - Bridge Protocol Data Unit, то есть единица данных bridge-протокола.
Каждый комутатор имеет уникальный BID - Bridge ID. При включении комутатора блокируется полезная комутация, однако протокол STP продолжает работать.
Это вызвано тем что каждый комутатор по умолчанию считает что он Root. Определние Root происходит по BID, наименьший BID становится Root. После того как все комутаторы
получили свои роли, каждый из них строит свой PPV и отключают соответствующие линки. После этого процесса комутация возобновляется. 